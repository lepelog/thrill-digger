(this["webpackJsonpthrill-digger-react"]=this["webpackJsonpthrill-digger-react"]||[]).push([[0],{11:function(e,t,n){"use strict";(function(e){var i=n(13),r=n(3),o=n(4),a=n(5),c=n(7),s=n(6),l=n(1),d=n.n(l),u=(n(22),n(2)),b=n(0),p=function(t){Object(c.a)(d,t);var l=Object(s.a)(d);function d(e){var t;return Object(r.a)(this,d),(t=l.call(this,e)).state={nativeModule:null,currentMessage:"waiting to initialize...",solver:null,cellStates:[{bombPercentage:0,rupoorPercentage:0,selectedType:u.b.Unspecified,ranking:100}],boardHeight:0,boardWidth:0,identifiedLoop:void 0,matchingSeedCount:-1},t.selectedChanged=t.selectedChanged.bind(Object(a.a)(t)),t}return Object(o.a)(d,[{key:"componentDidMount",value:function(){var t=this;n.e(3).then(n.bind(null,32)).then((function(n){t.setState({nativeModule:n,currentMessage:"computing values...",solver:n.create_solver(2)}),e((function(){var e;console.log("setting state"),null===(e=t.state.solver)||void 0===e||e.cache_boards();var n=t.state.solver.get_height(),i=t.state.solver.get_width(),r=Array(n*i).fill(0).map((function(){return{bombPercentage:0,rupoorPercentage:0,selectedType:u.b.Unspecified,ranking:100}}));t.setState({currentMessage:"done!",boardWidth:i,boardHeight:n,cellStates:r}),t.updateBoardAndRecalculateProbs(r)}))}))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.state.solver)||void 0===e||e.free()}},{key:"getSolverOrError",value:function(){if(null===this.state.solver)throw Error("solver is null!");return this.state.solver}},{key:"selectedChanged",value:function(e,t){var n=this.state.cellStates;n[e].selectedType=t,this.getSolverOrError().set_hole(e,t),this.updateBoardAndRecalculateProbs(n)}},{key:"updateBoardAndRecalculateProbs",value:function(e){var t=this.getSolverOrError();t.calculate_probabilities_with_pregenerated(),e.forEach((function(e,n){e.bombPercentage=t.get_probability(n),e.rupoorPercentage=t.get_rupoor_probability(n)}));var n=e.filter((function(e){return e.selectedType===u.b.Unspecified})).map((function(e,t){return[t,e]}));n.sort((function(e,t){return e[1].bombPercentage-t[1].bombPercentage||e[1].rupoorPercentage-t[1].rupoorPercentage})),n.forEach((function(e,t){var n=Object(i.a)(e,2);n[0];return n[1].ranking=t})),e.forEach((function(e){e.selectedType!==u.b.Unspecified&&(e.ranking=100)})),this.setState({cellStates:e,matchingSeedCount:t.get_possible_rng_values_count(),identifiedLoop:t.get_identified_loop()})}},{key:"resetBoard",value:function(){for(var e,t,n=(null===(e=this.state.solver)||void 0===e?void 0:e.get_height())||0,i=(null===(t=this.state.solver)||void 0===t?void 0:t.get_width())||0,r=Array(n*i).fill(0).map((function(){return{bombPercentage:0,rupoorPercentage:0,selectedType:u.b.Unspecified,ranking:100}})),o=this.getSolverOrError(),a=0;a<n*i;a++)o.set_hole(a,u.b.Unspecified);this.updateBoardAndRecalculateProbs(r)}},{key:"render",value:function(){var e=this,t=this.state,n=t.boardHeight,i=t.boardWidth,r=t.cellStates,o=t.currentMessage,a=t.matchingSeedCount,c=t.identifiedLoop;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h1",{children:"Thrill Digger Expert solver"}),Object(b.jsx)("div",{children:o}),Object(b.jsxs)("div",{children:["matching seeds: ",a]}),Object(b.jsxs)("div",{children:["identified loop: ",c]}),Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:Array(n).fill(0).map((function(t,n){return Object(b.jsx)("tr",{children:Array(i).fill(0).map((function(t,o){var a=n*i+o,c=r[a];return Object(b.jsx)("td",{children:Object(b.jsx)(u.a,{bombProbability:c.bombPercentage,rupoorProbability:c.rupoorPercentage,selectedState:c.selectedType,index:a,selectionChangedCallback:e.selectedChanged,ranking:c.ranking},a)})}))})}))})}),Object(b.jsx)("button",{onClick:this.resetBoard.bind(this),children:"Reset"}),Object(b.jsxs)("div",{children:["Source code: ",Object(b.jsx)("a",{href:"https://github.com/lepelog/thrill-digger",children:"GitHub"})]})]})}}]),d}(d.a.Component);t.a=function(){return Object(b.jsx)(p,{})}}).call(this,n(19).setImmediate)},18:function(e,t,n){},2:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return x}));var i,r=n(3),o=n(4),a=n(7),c=n(6),s=n(1),l=n.n(s),d=n(12),u=n.n(d),b=(n(29),n.p+"static/media/Unspecified.2b9ce60f.png"),p=n.p+"static/media/GreenRupee.7b5504b7.png",g=n.p+"static/media/BlueRupee.5b70e0f7.png",h=n.p+"static/media/RedRupee.863b0080.png",f=n.p+"static/media/SilverRupee.a1abe29d.png",v=n.p+"static/media/GoldRupee.8fb25791.png",j=n.p+"static/media/Rupoor.2f12451b.png",m=n.p+"static/media/Bomb.3dc15ccf.png",O=n(0);!function(e){e[e.Unspecified=0]="Unspecified",e[e.GreenRupee=1]="GreenRupee",e[e.BlueRupee=2]="BlueRupee",e[e.RedRupee=3]="RedRupee",e[e.SilverRupee=4]="SilverRupee",e[e.GoldRupee=5]="GoldRupee",e[e.Rupoor=6]="Rupoor",e[e.Bomb=7]="Bomb"}(i||(i={}));var R=[i.Unspecified,i.GreenRupee,i.BlueRupee,i.RedRupee,i.SilverRupee,i.GoldRupee,i.Rupoor,i.Bomb],y=u()(["#2de500","#e5d200","#e50b00"]),x=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).contentImages=void 0,i.contentImages=[b,p,g,h,f,v,j,m],i}return Object(o.a)(n,[{key:"onSelectChange",value:function(e){this.props.selectionChangedCallback(this.props.index,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.bombProbability,r=t.rupoorProbability,o=t.selectedState,a=t.ranking,c=o===i.Unspecified?y(isFinite(n)?n:0):"unset";return Object(O.jsxs)("div",{className:"grid-field",style:{backgroundColor:c,borderColor:a<3?"#0011d3":"black"},children:[Object(O.jsxs)("div",{children:["bomb probability: ",(100*n).toFixed(2),"%"]}),Object(O.jsxs)("div",{children:["rupoor probability: ",(100*r).toFixed(2),"%"]}),Object(O.jsx)("div",{children:R.map((function(t,n){return Object(O.jsx)("img",{className:(n===o?"content-image-highlighted ":"")+"content-image",src:e.contentImages[n],alt:(r=t,i[r]),onClick:e.onSelectChange.bind(e,n),width:20},n);var r}))})]})}}]),n}(l.a.Component)},22:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=n(10),a=n.n(o),c=(n(18),n(11)),s=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,36)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),o(e),a(e)}))},l=n(0);a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(c.a,{})}),document.getElementById("root")),s()}},[[31,1,2]]]);
//# sourceMappingURL=main.9de5b274.chunk.js.map